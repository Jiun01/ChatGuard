function checkAllSettingsDisabled(){return new Promise((e=>{chrome.storage.sync.get(["enableForInstagram","enableHighlighting","enableAutoReplacement","enableNotifications"],(n=>{const t=!n.enableForInstagram&&!n.enableHighlighting&&!n.enableAutoReplacement&&!n.enableNotifications;e(t)}))}))}async function updateBadgeText(){const e=await checkAllSettingsDisabled();chrome.action.setBadgeText({text:e?"OFF":"ON"})}chrome.runtime.onInstalled.addListener((()=>{console.log("ChatGuard extension installed"),chrome.storage.sync.get(["enableForInstagram","enableHighlighting","enableAutoReplacement","enableNotifications"],(e=>{const n={enableForInstagram:void 0===e.enableForInstagram||e.enableForInstagram,enableHighlighting:void 0===e.enableHighlighting||e.enableHighlighting,enableAutoReplacement:void 0===e.enableAutoReplacement||e.enableAutoReplacement,enableNotifications:void 0===e.enableNotifications||e.enableNotifications};chrome.storage.sync.set(n),console.log("Default settings initialized:",n)}))})),chrome.runtime.onMessage.addListener(((e,n,t)=>{if("LOG"===e.type)console.log("Content script log:",e.message),t({success:!0});else if("GET_SETTINGS"===e.type)return chrome.storage.sync.get(["enableForInstagram","enableHighlighting","enableAutoReplacement","enableNotifications"],(e=>{t({success:!0,settings:e})})),!0})),chrome.action.setBadgeBackgroundColor({color:"#474DFF"}),chrome.action.setBadgeText({text:"ON"}),chrome.action.setBadgeBackgroundColor({color:"#474DFF"}),chrome.runtime.onInstalled.addListener((async()=>{console.log("ChatGuard extension installed"),chrome.storage.sync.get(["enableForInstagram","enableHighlighting","enableAutoReplacement","enableNotifications"],(e=>{const n={enableForInstagram:void 0===e.enableForInstagram||e.enableForInstagram,enableHighlighting:void 0===e.enableHighlighting||e.enableHighlighting,enableAutoReplacement:void 0===e.enableAutoReplacement||e.enableAutoReplacement,enableNotifications:void 0===e.enableNotifications||e.enableNotifications};chrome.storage.sync.set(n),console.log("Default settings initialized:",n),updateBadgeText()}))})),chrome.storage.onChanged.addListener((async e=>{updateBadgeText()}));